import{K as He,C as te,S as $,i as Q,s as K,e as m,t as B,c as _,a as g,g as L,d as f,b as h,f as k,I as d,h as oe,J as P,k as D,n as T,L as se,M as ve,N as Pe,O as C,x as R,P as be,Q as ce,R as X,A as Ve,T as W,U as ue,V as Je,W as Xe,X as fe,Y as he,Z as we,l as Y,r as ye,u as H,w as Se,_ as Ge,j as le,m as ae,o as ne,v as ie,$ as Ye,a0 as De,a1 as We,a2 as ke,a3 as Ze,a4 as Ee,a5 as $e,a6 as Qe,a7 as Ke,a8 as xe,a9 as et,aa as tt,ab as st,ac as lt,ad as at}from"../chunks/vendor-55bebcfc.js";const G=He("https://dtprlndlwbwnggjkkjel.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlhdCI6MTYzMzE5OTI0OSwiZXhwIjoxOTQ4Nzc1MjQ5fQ.3j1fYOu8xDDMgZXJkM0y0VniTaXhSNrkoPziDvN-dvk"),Z=te("home"),de=te(null),x=te([]),pe=te(0),ee=te(!0),ze=te(!1),nt=async()=>{let i=[];const{data:e,error:t}=await G.storage.from("music-files").list();e.map(s=>{i.push({songName:s.name,url:null})}),x.set(i)};nt();function Te(i,e,t){const s=i.slice();return s[25]=e[t],s}function Ce(i){let e,t,s=i[7][i[6]].songName.split(".")[0]+"",l;return{c(){e=m("span"),t=B("Now Playing"),l=B(s),this.h()},l(a){e=_(a,"SPAN",{class:!0});var n=g(e);t=L(n,"Now Playing"),n.forEach(f),l=L(a,s),this.h()},h(){h(e,"class","green svelte-zznv6f")},m(a,n){k(a,e,n),d(e,t),k(a,l,n)},p(a,n){n&192&&s!==(s=a[7][a[6]].songName.split(".")[0]+"")&&oe(l,s)},d(a){a&&f(e),a&&f(l)}}}function it(i){let e;return{c(){e=m("i"),this.h()},l(t){e=_(t,"I",{class:!0}),g(e).forEach(f),this.h()},h(){h(e,"class","fas fa-spinner fa-pulse svelte-zznv6f")},m(t,s){k(t,e,s)},p:P,i:P,o:P,d(t){t&&f(e)}}}function rt(i){let e,t,s,l,a,n;function r(c,p){return c[1]?ot:ct}let u=r(i),o=u(i);return{c(){e=m("i"),t=D(),o.c(),s=D(),l=m("i"),this.h()},l(c){e=_(c,"I",{class:!0}),g(e).forEach(f),t=T(c),o.l(c),s=T(c),l=_(c,"I",{class:!0}),g(l).forEach(f),this.h()},h(){h(e,"class","fas fa-step-backward svelte-zznv6f"),h(l,"class","fas fa-step-forward svelte-zznv6f")},m(c,p){k(c,e,p),k(c,t,p),o.m(c,p),k(c,s,p),k(c,l,p),a||(n=[C(e,"click",i[15]),C(l,"click",i[14])],a=!0)},p(c,p){u===(u=r(c))&&o?o.p(c,p):(o.d(1),o=u(c),o&&(o.c(),R(o,1),o.m(s.parentNode,s)))},i(c){R(o)},o:P,d(c){c&&f(e),c&&f(t),o.d(c),c&&f(s),c&&f(l),a=!1,ce(n)}}}function ot(i){let e,t,s,l;return{c(){e=m("i"),this.h()},l(a){e=_(a,"I",{class:!0}),g(e).forEach(f),this.h()},h(){h(e,"class","pauseButton fas fa-pause svelte-zznv6f")},m(a,n){k(a,e,n),s||(l=C(e,"click",i[10]),s=!0)},p:P,i(a){t||se(()=>{t=fe(e,he,{}),t.start()})},o:P,d(a){a&&f(e),s=!1,l()}}}function ct(i){let e,t,s,l;return{c(){e=m("i"),this.h()},l(a){e=_(a,"I",{class:!0}),g(e).forEach(f),this.h()},h(){h(e,"class","playButton fas fa-play svelte-zznv6f")},m(a,n){k(a,e,n),s||(l=C(e,"click",i[9]),s=!0)},p:P,i(a){t||se(()=>{t=fe(e,he,{}),t.start()})},o:P,d(a){a&&f(e),s=!1,l()}}}function ut(i){let e,t,s;return{c(){e=m("i"),this.h()},l(l){e=_(l,"I",{id:!0,class:!0}),g(e).forEach(f),this.h()},h(){h(e,"id","muteButton"),h(e,"class","fas fa-volume-mute red svelte-zznv6f")},m(l,a){k(l,e,a),t||(s=C(e,"click",i[12]),t=!0)},p:P,d(l){l&&f(e),t=!1,s()}}}function ft(i){let e,t,s;return{c(){e=m("i"),this.h()},l(l){e=_(l,"I",{id:!0,class:!0}),g(e).forEach(f),this.h()},h(){h(e,"id","muteButton"),h(e,"class","fas fa-volume-up white svelte-zznv6f")},m(l,a){k(l,e,a),t||(s=C(e,"click",i[11]),t=!0)},p:P,d(l){l&&f(e),t=!1,s()}}}function Me(i){let e,t=i[25]+"",s,l;return{c(){e=m("option"),s=B(t),this.h()},l(a){e=_(a,"OPTION",{class:!0});var n=g(e);s=L(n,t),n.forEach(f),this.h()},h(){e.__value=l=i[25],e.value=e.__value,h(e,"class","svelte-zznv6f")},m(a,n){k(a,e,n),d(e,s)},p:P,d(a){a&&f(e)}}}function ht(i){let e,t,s,l,a,n,r,u,o,c,p,y,b,E,I,O,z=i[7].length>0&&Ce(i);function F(w,A){return w[5]?it:rt}let q=F(i),j=q(i);function S(w,A){return w[2]?ut:ft}let M=S(i),N=M(i),V=i[8],U=[];for(let w=0;w<V.length;w+=1)U[w]=Me(Te(i,V,w));return{c(){e=m("div"),t=m("div"),s=m("div"),l=D(),a=m("div"),z&&z.c(),n=D(),r=m("div"),j.c(),u=D(),o=m("div"),N.c(),c=D(),p=m("input"),y=D(),b=m("div"),E=m("select");for(let w=0;w<U.length;w+=1)U[w].c();this.h()},l(w){e=_(w,"DIV",{class:!0});var A=g(e);t=_(A,"DIV",{class:!0});var v=g(t);s=_(v,"DIV",{class:!0}),g(s).forEach(f),l=T(v),a=_(v,"DIV",{class:!0});var J=g(a);z&&z.l(J),J.forEach(f),n=T(v),r=_(v,"DIV",{class:!0});var re=g(r);j.l(re),re.forEach(f),u=T(v),o=_(v,"DIV",{class:!0});var _e=g(o);N.l(_e),c=T(_e),p=_(_e,"INPUT",{type:!0,min:!0,max:!0,class:!0}),_e.forEach(f),y=T(v),b=_(v,"DIV",{class:!0});var Ie=g(b);E=_(Ie,"SELECT",{class:!0});var Ne=g(E);for(let ge=0;ge<U.length;ge+=1)U[ge].l(Ne);Ne.forEach(f),Ie.forEach(f),v.forEach(f),A.forEach(f),this.h()},h(){h(s,"class","progressBar svelte-zznv6f"),h(a,"class","nowPlayingContainer svelte-zznv6f"),h(r,"class","songControls svelte-zznv6f"),h(p,"type","range"),h(p,"min","0"),h(p,"max","100"),h(p,"class","slider svelte-zznv6f"),h(o,"class","volumeSlider svelte-zznv6f"),h(E,"class","svelte-zznv6f"),i[3]===void 0&&se(()=>i[21].call(E)),h(b,"class","selectVisualizer svelte-zznv6f"),h(t,"class","bottom-items svelte-zznv6f"),h(e,"class","bottom-container svelte-zznv6f")},m(w,A){k(w,e,A),d(e,t),d(t,s),i[19](s),d(t,l),d(t,a),z&&z.m(a,null),d(t,n),d(t,r),j.m(r,null),d(t,u),d(t,o),N.m(o,null),d(o,c),d(o,p),ve(p,i[0]),d(t,y),d(t,b),d(b,E);for(let v=0;v<U.length;v+=1)U[v].m(E,null);Pe(E,i[3]),I||(O=[C(window,"keydown",i[17]),C(p,"change",i[20]),C(p,"input",i[20]),C(p,"input",i[13]),C(E,"change",i[21]),C(E,"change",i[16])],I=!0)},p(w,[A]){if(w[7].length>0?z?z.p(w,A):(z=Ce(w),z.c(),z.m(a,null)):z&&(z.d(1),z=null),q===(q=F(w))&&j?j.p(w,A):(j.d(1),j=q(w),j&&(j.c(),R(j,1),j.m(r,null))),M===(M=S(w))&&N?N.p(w,A):(N.d(1),N=M(w),N&&(N.c(),N.m(o,c))),A&1&&ve(p,w[0]),A&256){V=w[8];let v;for(v=0;v<V.length;v+=1){const J=Te(w,V,v);U[v]?U[v].p(J,A):(U[v]=Me(J),U[v].c(),U[v].m(E,null))}for(;v<U.length;v+=1)U[v].d(1);U.length=V.length}A&264&&Pe(E,w[3])},i(w){R(j)},o:P,d(w){w&&f(e),i[19](null),z&&z.d(),j.d(),N.d(),be(U,w),I=!1,ce(O)}}}function dt(i,e,t){let s,l,a,n;X(i,ze,v=>t(23,s=v)),X(i,ee,v=>t(5,l=v)),X(i,pe,v=>t(6,a=v)),X(i,x,v=>t(7,n=v));let{app:r}=e,u=20,o=u,c=!1,p=!1,y=["stars","cubes"],b=y[0],E,I={callback:()=>{S()}};Ve(async()=>{W(ee,l=!0,l);let v;if(n[a].url==null){const{data:J,error:re}=await G.storage.from("music-files").download(n[a].songName);v=URL.createObjectURL(J),W(x,n[a].url=v,n)}r.changeSound(v),r.addProgressEvent(E),r.addSongEndEvent(I),N(),W(ee,l=!1,l)});const O=async()=>{t(1,c=!0),r.playSound()},z=()=>{t(1,c=!1),r.pauseSound()},F=()=>{t(2,p=!0),t(0,u=0),r.changeVolume(u)},q=()=>{t(2,p=!1),o==0&&(o=20),t(0,u=o),r.changeVolume(u)},j=v=>{o=u,u==0?F():(t(2,p=!1),r.changeVolume(u))},S=async()=>{z(),W(ee,l=!0,l),pe.set((a+1)%n.length);let v;if(n[a].url==null){const{data:J,error:re}=await G.storage.from("music-files").download(n[a].songName);v=URL.createObjectURL(J),W(x,n[a].url=v,n)}r.changeSound(v),W(ee,l=!1,l),O()},M=async()=>{W(ee,l=!0,l),z(),a==0?pe.set(n.length-1):pe.set(a-1);let v;if(n[a].url==null){const{data:J,error:re}=await G.storage.from("music-files").download(n[a].songName);v=URL.createObjectURL(J),W(x,n[a].url=v,n)}else v=n[a].url;r.changeSound(v),W(ee,l=!1,l),O()},N=()=>{y.forEach(v=>{v==b&&r.setActiveVisualizer(b)})},V=v=>{v.keyCode==32&&!s&&(c?z():O())};function U(v){ue[v?"unshift":"push"](()=>{E=v,t(4,E)})}function w(){u=Je(this.value),t(0,u)}function A(){b=Xe(this),t(3,b),t(8,y)}return i.$$set=v=>{"app"in v&&t(18,r=v.app)},[u,c,p,b,E,l,a,n,y,O,z,F,q,j,S,M,N,V,r,U,w,A]}class pt extends ${constructor(e){super();Q(this,e,dt,ht,K,{app:18})}}function mt(i){let e,t,s,l,a,n,r,u,o,c,p,y,b,E,I,O,z,F,q,j;return{c(){e=m("div"),t=m("i"),s=D(),l=m("div"),a=m("form"),n=m("input"),r=D(),u=m("input"),o=D(),c=m("button"),p=B("Sign In"),y=D(),b=m("p"),E=B("New User? "),I=m("span"),O=B("Sign Up"),z=B(" instead!"),this.h()},l(S){e=_(S,"DIV",{class:!0});var M=g(e);t=_(M,"I",{class:!0}),g(t).forEach(f),s=T(M),l=_(M,"DIV",{class:!0});var N=g(l);a=_(N,"FORM",{class:!0});var V=g(a);n=_(V,"INPUT",{name:!0,type:!0,autocomplete:!0,placeholder:!0,class:!0}),r=T(V),u=_(V,"INPUT",{name:!0,type:!0,autocomplete:!0,placeholder:!0,class:!0}),o=T(V),c=_(V,"BUTTON",{class:!0});var U=g(c);p=L(U,"Sign In"),U.forEach(f),V.forEach(f),y=T(N),b=_(N,"P",{class:!0});var w=g(b);E=L(w,"New User? "),I=_(w,"SPAN",{class:!0});var A=g(I);O=L(A,"Sign Up"),A.forEach(f),z=L(w," instead!"),w.forEach(f),N.forEach(f),M.forEach(f),this.h()},h(){h(t,"class","fas fa-arrow-left svelte-1jzb7t7"),h(n,"name","email"),h(n,"type","email"),n.required=!0,h(n,"autocomplete","off"),h(n,"placeholder","Email..."),h(n,"class","svelte-1jzb7t7"),h(u,"name","password"),h(u,"type","password"),u.required=!0,h(u,"autocomplete","off"),h(u,"placeholder","Password..."),h(u,"class","svelte-1jzb7t7"),h(c,"class","svelte-1jzb7t7"),h(a,"class","svelte-1jzb7t7"),h(I,"class","svelte-1jzb7t7"),h(b,"class","svelte-1jzb7t7"),h(l,"class","auth-form svelte-1jzb7t7"),h(e,"class","pop-up svelte-1jzb7t7")},m(S,M){k(S,e,M),d(e,t),d(e,s),d(e,l),d(l,a),d(a,n),d(a,r),d(a,u),d(a,o),d(a,c),d(c,p),d(l,y),d(l,b),d(b,E),d(b,I),d(I,O),d(b,z),q||(j=[C(t,"click",i[2]),C(a,"submit",we(i[0])),C(I,"click",i[1])],q=!0)},p:P,i(S){F||se(()=>{F=fe(e,he,{}),F.start()})},o:P,d(S){S&&f(e),q=!1,ce(j)}}}function _t(i){async function e(l){const a=new FormData(l.target),{user:n,session:r,error:u}=await G.auth.signIn({email:a.get("email"),password:a.get("password")});if(u)alert(u.message);else{let o=n.email.split("@")[0];Z.set("home"),de.set(o)}}function t(){Z.set("sign-up")}return[e,t,()=>{Z.set("home")}]}class vt extends ${constructor(e){super();Q(this,e,_t,mt,K,{})}}function gt(i){let e,t,s,l,a,n,r,u,o,c,p,y,b,E,I,O,z,F,q,j;return{c(){e=m("div"),t=m("i"),s=D(),l=m("div"),a=m("form"),n=m("input"),r=D(),u=m("input"),o=D(),c=m("button"),p=B("Sign Up"),y=D(),b=m("p"),E=B("Existing User? "),I=m("span"),O=B("Sign In"),z=B(" instead!"),this.h()},l(S){e=_(S,"DIV",{class:!0});var M=g(e);t=_(M,"I",{class:!0}),g(t).forEach(f),s=T(M),l=_(M,"DIV",{class:!0});var N=g(l);a=_(N,"FORM",{class:!0});var V=g(a);n=_(V,"INPUT",{name:!0,type:!0,autocomplete:!0,placeholder:!0,class:!0}),r=T(V),u=_(V,"INPUT",{name:!0,type:!0,autocomplete:!0,placeholder:!0,class:!0}),o=T(V),c=_(V,"BUTTON",{class:!0});var U=g(c);p=L(U,"Sign Up"),U.forEach(f),V.forEach(f),y=T(N),b=_(N,"P",{class:!0});var w=g(b);E=L(w,"Existing User? "),I=_(w,"SPAN",{class:!0});var A=g(I);O=L(A,"Sign In"),A.forEach(f),z=L(w," instead!"),w.forEach(f),N.forEach(f),M.forEach(f),this.h()},h(){h(t,"class","fas fa-arrow-left svelte-1jzb7t7"),h(n,"name","email"),h(n,"type","email"),n.required=!0,h(n,"autocomplete","off"),h(n,"placeholder","Email..."),h(n,"class","svelte-1jzb7t7"),h(u,"name","password"),h(u,"type","password"),u.required=!0,h(u,"autocomplete","off"),h(u,"placeholder","Password..."),h(u,"class","svelte-1jzb7t7"),h(c,"class","svelte-1jzb7t7"),h(a,"class","svelte-1jzb7t7"),h(I,"class","svelte-1jzb7t7"),h(b,"class","svelte-1jzb7t7"),h(l,"class","auth-form svelte-1jzb7t7"),h(e,"class","pop-up svelte-1jzb7t7")},m(S,M){k(S,e,M),d(e,t),d(e,s),d(e,l),d(l,a),d(a,n),d(a,r),d(a,u),d(a,o),d(a,c),d(c,p),d(l,y),d(l,b),d(b,E),d(b,I),d(I,O),d(b,z),q||(j=[C(t,"click",i[2]),C(a,"submit",we(i[0])),C(I,"click",i[1])],q=!0)},p:P,i(S){F||se(()=>{F=fe(e,he,{}),F.start()})},o:P,d(S){S&&f(e),q=!1,ce(j)}}}function bt(i){async function e(l){const a=new FormData(l.target),{user:n,session:r,error:u}=await G.auth.signUp({email:a.get("email"),password:a.get("password")});if(u)alert(u.message);else{Z.set("home");let o=n.email.split("@")[0];de.set(o),alert("Signed In as: "+o)}}function t(){Z.set("sign-in")}return[e,t,()=>{Z.set("home")}]}class wt extends ${constructor(e){super();Q(this,e,bt,gt,K,{})}}function Ue(i){let e,t,s,l,a,n,r,u,o,c,p;return{c(){e=m("div"),t=m("div"),s=m("p"),l=m("span"),a=B(i[0]),n=D(),r=m("i"),u=D(),o=m("i"),this.h()},l(y){e=_(y,"DIV",{class:!0});var b=g(e);t=_(b,"DIV",{class:!0});var E=g(t);s=_(E,"P",{class:!0});var I=g(s);l=_(I,"SPAN",{class:!0});var O=g(l);a=L(O,i[0]),O.forEach(f),n=T(I),r=_(I,"I",{class:!0}),g(r).forEach(f),u=T(I),o=_(I,"I",{class:!0}),g(o).forEach(f),I.forEach(f),E.forEach(f),b.forEach(f),this.h()},h(){h(l,"class","svelte-1okxqai"),h(r,"class","fas fa-user"),h(o,"class","fas fa-sign-out-alt svelte-1okxqai"),h(s,"class","svelte-1okxqai"),h(t,"class","profile"),h(e,"class","profile-container svelte-1okxqai")},m(y,b){k(y,e,b),d(e,t),d(t,s),d(s,l),d(l,a),d(s,n),d(s,r),d(s,u),d(s,o),c||(p=C(o,"click",i[1]),c=!0)},p(y,b){b&1&&oe(a,y[0])},d(y){y&&f(e),c=!1,p()}}}function yt(i){let e,t=i[0]!=null&&Ue(i);return{c(){t&&t.c(),e=Y()},l(s){t&&t.l(s),e=Y()},m(s,l){t&&t.m(s,l),k(s,e,l)},p(s,[l]){s[0]!=null?t?t.p(s,l):(t=Ue(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:P,o:P,d(s){t&&t.d(s),s&&f(e)}}}function St(i,e,t){let s;X(i,de,a=>t(0,s=a));async function l(){const{error:a}=await G.auth.signOut();console.log(a),de.set(null)}return[s,l]}class kt extends ${constructor(e){super();Q(this,e,St,yt,K,{})}}function je(i,e,t){const s=i.slice();return s[18]=e[t].name,s[19]=e[t].user,s}function Ae(i){let e,t,s,l;const a=[It,zt,Et],n=[];function r(u,o){return u[6]=="home"?0:u[6]=="sign-in"?1:u[6]=="sign-up"?2:-1}return~(e=r(i))&&(t=n[e]=a[e](i)),{c(){t&&t.c(),s=Y()},l(u){t&&t.l(u),s=Y()},m(u,o){~e&&n[e].m(u,o),k(u,s,o),l=!0},p(u,o){let c=e;e=r(u),e===c?~e&&n[e].p(u,o):(t&&(ye(),H(n[c],1,1,()=>{n[c]=null}),Se()),~e?(t=n[e],t?t.p(u,o):(t=n[e]=a[e](u),t.c()),R(t,1),t.m(s.parentNode,s)):t=null)},i(u){l||(R(t),l=!0)},o(u){H(t),l=!1},d(u){~e&&n[e].d(u),u&&f(s)}}}function Et(i){let e,t;return e=new wt({}),{c(){le(e.$$.fragment)},l(s){ae(e.$$.fragment,s)},m(s,l){ne(e,s,l),t=!0},p:P,i(s){t||(R(e.$$.fragment,s),t=!0)},o(s){H(e.$$.fragment,s),t=!1},d(s){ie(e,s)}}}function zt(i){let e,t;return e=new vt({}),{c(){le(e.$$.fragment)},l(s){ae(e.$$.fragment,s)},m(s,l){ne(e,s,l),t=!0},p:P,i(s){t||(R(e.$$.fragment,s),t=!0)},o(s){H(e.$$.fragment,s),t=!1},d(s){ie(e,s)}}}function It(i){let e,t,s;function l(c,p){return c[7]?Pt:Nt}let a=l(i),n=a(i);function r(c,p){return c[5]==null?Dt:Vt}let u=r(i),o=u(i);return{c(){e=m("div"),n.c(),t=D(),o.c(),s=Y(),this.h()},l(c){e=_(c,"DIV",{class:!0});var p=g(e);n.l(p),p.forEach(f),t=T(c),o.l(c),s=Y(),this.h()},h(){h(e,"class","chat-display svelte-1wcw8na")},m(c,p){k(c,e,p),n.m(e,null),i[12](e),k(c,t,p),o.m(c,p),k(c,s,p)},p(c,p){a===(a=l(c))&&n?n.p(c,p):(n.d(1),n=a(c),n&&(n.c(),n.m(e,null))),u===(u=r(c))&&o?o.p(c,p):(o.d(1),o=u(c),o&&(o.c(),R(o,1),o.m(s.parentNode,s)))},i(c){R(o)},o:P,d(c){c&&f(e),n.d(),i[12](null),c&&f(t),o.d(c),c&&f(s)}}}function Nt(i){let e;return{c(){e=m("i"),this.h()},l(t){e=_(t,"I",{class:!0}),g(e).forEach(f),this.h()},h(){h(e,"class","fas fa-spinner fa-pulse svelte-1wcw8na")},m(t,s){k(t,e,s)},p:P,d(t){t&&f(e)}}}function Pt(i){let e,t=i[7],s=[];for(let l=0;l<t.length;l+=1)s[l]=Oe(je(i,t,l));return{c(){for(let l=0;l<s.length;l+=1)s[l].c();e=Y()},l(l){for(let a=0;a<s.length;a+=1)s[a].l(l);e=Y()},m(l,a){for(let n=0;n<s.length;n+=1)s[n].m(l,a);k(l,e,a)},p(l,a){if(a&128){t=l[7];let n;for(n=0;n<t.length;n+=1){const r=je(l,t,n);s[n]?s[n].p(r,a):(s[n]=Oe(r),s[n].c(),s[n].m(e.parentNode,e))}for(;n<s.length;n+=1)s[n].d(1);s.length=t.length}},d(l){be(s,l),l&&f(e)}}}function Oe(i){let e,t,s,l=i[19]+"",a,n,r=i[18]+"",u,o;return{c(){e=m("div"),t=m("p"),s=m("span"),a=B(l),n=B(": "),u=B(r),o=D(),this.h()},l(c){e=_(c,"DIV",{class:!0});var p=g(e);t=_(p,"P",{class:!0});var y=g(t);s=_(y,"SPAN",{class:!0});var b=g(s);a=L(b,l),b.forEach(f),n=L(y,": "),u=L(y,r),y.forEach(f),o=T(p),p.forEach(f),this.h()},h(){h(s,"class","svelte-1wcw8na"),h(t,"class","svelte-1wcw8na"),h(e,"class","chat-content svelte-1wcw8na")},m(c,p){k(c,e,p),d(e,t),d(t,s),d(s,a),d(t,n),d(t,u),d(e,o)},p(c,p){p&128&&l!==(l=c[19]+"")&&oe(a,l),p&128&&r!==(r=c[18]+"")&&oe(u,r)},d(c){c&&f(e)}}}function Vt(i){let e,t,s,l,a,n,r,u,o;return{c(){e=m("form"),t=m("div"),s=m("input"),l=D(),a=m("div"),n=m("button"),r=m("i"),this.h()},l(c){e=_(c,"FORM",{});var p=g(e);t=_(p,"DIV",{class:!0});var y=g(t);s=_(y,"INPUT",{placeholder:!0,class:!0,name:!0,type:!0,autocomplete:!0}),l=T(y),a=_(y,"DIV",{class:!0});var b=g(a);n=_(b,"BUTTON",{class:!0});var E=g(n);r=_(E,"I",{class:!0}),g(r).forEach(f),E.forEach(f),b.forEach(f),y.forEach(f),p.forEach(f),this.h()},h(){s.required=!0,h(s,"placeholder","Enter Message..."),h(s,"class","form-input svelte-1wcw8na"),h(s,"name","name"),h(s,"type","text"),h(s,"autocomplete","off"),h(r,"class","fas fa-arrow-right svelte-1wcw8na"),h(n,"class","form-btn svelte-1wcw8na"),h(a,"class","btn svelte-1wcw8na"),h(t,"class","form-elements svelte-1wcw8na")},m(c,p){k(c,e,p),d(e,t),d(t,s),i[16](s),ve(s,i[1]),d(t,l),d(t,a),d(a,n),d(n,r),u||(o=[C(s,"focus",i[14]),C(s,"blur",i[15]),C(s,"input",i[17]),C(e,"submit",we(i[8]))],u=!0)},p(c,p){p&2&&s.value!==c[1]&&ve(s,c[1])},i:P,o:P,d(c){c&&f(e),i[16](null),u=!1,ce(o)}}}function Dt(i){let e,t,s,l,a,n;return{c(){e=m("div"),t=m("button"),s=B("Join Chat"),this.h()},l(r){e=_(r,"DIV",{class:!0});var u=g(e);t=_(u,"BUTTON",{class:!0});var o=g(t);s=L(o,"Join Chat"),o.forEach(f),u.forEach(f),this.h()},h(){h(t,"class","svelte-1wcw8na"),h(e,"class","auth-btn svelte-1wcw8na")},m(r,u){k(r,e,u),d(e,t),d(t,s),a||(n=C(t,"click",i[13]),a=!0)},p:P,i(r){l||se(()=>{l=fe(t,he,{}),l.start()})},o:P,d(r){r&&f(e),a=!1,n()}}}function Tt(i){let e,t,s,l,a,n,r,u,o=i[3]==!1&&Ae(i);return{c(){e=m("div"),t=m("div"),s=m("div"),l=m("i"),a=D(),o&&o.c(),this.h()},l(c){e=_(c,"DIV",{class:!0});var p=g(e);t=_(p,"DIV",{class:!0});var y=g(t);s=_(y,"DIV",{class:!0});var b=g(s);l=_(b,"I",{class:!0}),g(l).forEach(f),b.forEach(f),a=T(y),o&&o.l(y),y.forEach(f),p.forEach(f),this.h()},h(){h(l,"class","fas fa-dot-circle svelte-1wcw8na"),h(s,"class","toggle-container svelte-1wcw8na"),h(t,"class","chatForm svelte-1wcw8na"),h(e,"class","container svelte-1wcw8na")},m(c,p){k(c,e,p),d(e,t),d(t,s),d(s,l),i[11](l),d(t,a),o&&o.m(t,null),n=!0,r||(u=C(s,"click",i[10]),r=!0)},p(c,[p]){c[3]==!1?o?(o.p(c,p),p&8&&R(o,1)):(o=Ae(c),o.c(),R(o,1),o.m(t,null)):o&&(ye(),H(o,1,1,()=>{o=null}),Se())},i(c){n||(R(o),n=!0)},o(c){H(o),n=!1},d(c){c&&f(e),i[11](null),o&&o.d(),r=!1,u()}}}function Ct(i,e,t){let s,l,a;X(i,de,S=>t(5,s=S)),X(i,Z,S=>t(6,l=S));let n,r="",u,o=!1,c;async function p(S){const M=new FormData(S.target),{data:N,error:V}=await G.from("chat").insert({name:M.get("name"),user:s});console.log(V),t(0,n.value="",n),t(2,u.scrollTop=u.scrollHeight,u)}const y=Ge(null,S=>{G.from("chat").select("*").then(({error:N,data:V})=>S(V));const M=G.from("chat").on("INSERT",N=>{S([...Ye(y),N.new])}).subscribe();return()=>G.removeSubscription(M)});X(i,y,S=>t(7,a=S));function b(S){t(3,o=!o),o?t(4,c.className="far fa-comment-dots",c):t(4,c.className="fas fa-dot-circle",c)}function E(S){ue[S?"unshift":"push"](()=>{c=S,t(4,c)})}function I(S){ue[S?"unshift":"push"](()=>{u=S,t(2,u)})}const O=()=>{Z.set("sign-in")},z=S=>{ze.set(!0)},F=S=>{ze.set(!1)};function q(S){ue[S?"unshift":"push"](()=>{n=S,t(0,n)})}function j(){r=this.value,t(1,r)}return[n,r,u,o,c,s,l,a,p,y,b,E,I,O,z,F,q,j]}class Mt extends ${constructor(e){super();Q(this,e,Ct,Tt,K,{})}}function Re(i,e,t){const s=i.slice();return s[7]=e[t],s[9]=t,s}function Be(i){let e,t,s,l,a=i[2],n=[];for(let r=0;r<a.length;r+=1)n[r]=Le(Re(i,a,r));return{c(){e=m("h1"),t=B("Playlist"),s=D();for(let r=0;r<n.length;r+=1)n[r].c();l=Y(),this.h()},l(r){e=_(r,"H1",{class:!0});var u=g(e);t=L(u,"Playlist"),u.forEach(f),s=T(r);for(let o=0;o<n.length;o+=1)n[o].l(r);l=Y(),this.h()},h(){h(e,"class","svelte-1th2x6n")},m(r,u){k(r,e,u),d(e,t),k(r,s,u);for(let o=0;o<n.length;o+=1)n[o].m(r,u);k(r,l,u)},p(r,u){if(u&12){a=r[2];let o;for(o=0;o<a.length;o+=1){const c=Re(r,a,o);n[o]?n[o].p(c,u):(n[o]=Le(c),n[o].c(),n[o].m(l.parentNode,l))}for(;o<n.length;o+=1)n[o].d(1);n.length=a.length}},d(r){r&&f(e),r&&f(s),be(n,r),r&&f(l)}}}function Le(i){let e,t=i[7].songName.split(".")[0]+"",s,l;return{c(){e=m("p"),s=B(t),this.h()},l(a){e=_(a,"P",{class:!0});var n=g(e);s=L(n,t),n.forEach(f),this.h()},h(){h(e,"class",l=""+(De(i[3]==i[9]?"currentSong":"")+" svelte-1th2x6n"))},m(a,n){k(a,e,n),d(e,s)},p(a,n){n&4&&t!==(t=a[7].songName.split(".")[0]+"")&&oe(s,t),n&8&&l!==(l=""+(De(a[3]==a[9]?"currentSong":"")+" svelte-1th2x6n"))&&h(e,"class",l)},d(a){a&&f(e)}}}function Ut(i){let e,t,s,l,a,n,r=i[0]==!1&&Be(i);return{c(){e=m("div"),t=m("div"),s=m("i"),l=D(),r&&r.c(),this.h()},l(u){e=_(u,"DIV",{class:!0});var o=g(e);t=_(o,"DIV",{class:!0});var c=g(t);s=_(c,"I",{class:!0}),g(s).forEach(f),c.forEach(f),l=T(o),r&&r.l(o),o.forEach(f),this.h()},h(){h(s,"class","fas fa-dot-circle"),h(t,"class","toggle-container svelte-1th2x6n"),h(e,"class","playlist-container svelte-1th2x6n")},m(u,o){k(u,e,o),d(e,t),d(t,s),i[6](s),d(e,l),r&&r.m(e,null),a||(n=C(t,"click",i[4]),a=!0)},p(u,[o]){u[0]==!1?r?r.p(u,o):(r=Be(u),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},i:P,o:P,d(u){u&&f(e),i[6](null),r&&r.d(),a=!1,n()}}}function jt(i,e,t){let s,l;X(i,x,c=>t(2,s=c)),X(i,pe,c=>t(3,l=c));let a=!1,n,{app:r}=e;function u(c){t(0,a=!a),a?t(1,n.className="fas fa-music",n):t(1,n.className="fas fa-dot-circle",n)}function o(c){ue[c?"unshift":"push"](()=>{n=c,t(1,n)})}return i.$$set=c=>{"app"in c&&t(5,r=c.app)},[a,n,s,l,u,r,o]}class At extends ${constructor(e){super();Q(this,e,jt,Ut,K,{app:5})}}const qe=(i,e)=>i[Math.floor(Math.random()*e)],me=(i,e)=>Math.random()*(e-i)+i;class Ot{constructor(e,t){this.maximumStars=t,this.stars=[],this.scene=e,this.starHolder=new We,this.starHolder.position.setY(25),this.colors=[16711765,16711680,16711714,43775,16777215],this.addStars()}addStars(){for(let e=0;e<this.maximumStars;e++){const t=me(.01,.25),s=new ke(new Ze(t,24,24),new Ee({color:qe(this.colors,this.colors.length)}));this.spawnStar(s),this.stars.push(s),this.starHolder.add(s)}this.scene.add(this.starHolder)}animate(e,t){let s=1e-6,l=t[20]*s,a=s+(s*t[7]+l);this.starHolder.rotateX(-a*e)}spawnStar(e){let t=me(-50,50),s=me(-50,50),l=me(-50,50);e.position.set(t,s,l)}}class Rt{constructor(){this.audio=new Audio,this.audio.crossOrigin="anonymous",this.initialized=!1,this.audioGain=!0}changeSound(e){this.audio.src=e}playSound(){this.initialized||(this.audioCtx=new AudioContext,this.gainNode=this.audioCtx.createGain(),this.audioSource=this.audioCtx.createMediaElementSource(this.audio),this.analyser=this.audioCtx.createAnalyser(),this.audioSource.connect(this.analyser),this.analyser.connect(this.gainNode),this.gainNode.connect(this.audioCtx.destination),this.analyser.fftSize=64,this.bufferLength=this.analyser.frequencyBinCount,this.dataArray=new Uint8Array(this.bufferLength),this.gainNode.gain.value=.2,this.initialized=!0),this.audio.play()}muteSound(){this.gainNode.gain.value=0}unmuteSound(){this.gainNode.gain.value=1}pauseSound(){this.audio.pause()}changeVolume(e){this.gainNode.gain.value=e/100}getFrequencyData(){return this.analyser.getByteFrequencyData(this.dataArray),this.dataArray}addProgressEvent(e){this.audio.addEventListener("timeupdate",()=>{let t=this.audio.currentTime/this.audio.duration*100;e.style.width=t+"%"})}addSongEndEvent(e){this.audio.addEventListener("ended",()=>{e.callback()})}}class Bt{constructor(e){this.scene=e,this.colors=[16711782,13893717,11141188,5570594,8388659],this.initScene()}animate(e,t){let s=.01;for(let l=0;l<32;l++){let a=Math.min(s+s*t[l],2.56);this.cubes[l].scale.setZ(a*e)}}initScene(){this.cubes=[];let e=.7;for(let s=0;s<32;s++){let l=new ke(new $e(1,1,1,24,24,24),new Ee({color:qe(this.colors,this.colors.length)})),a=(s-16)/e,n=-me(15,25);l.position.setX(a),l.position.setY(n),l.receiveShadow=!0,l.castShadow=!0,this.cubes.push(l)}const t=new ke(new Qe(50,50),new Ee({color:6060778,side:Ke}));t.rotateX(-80),t.position.setZ(-10),t.position.setY(-5),t.receiveShadow=!0;for(let s=0;s<32;s++)t.add(this.cubes[s]);this.scene.add(t)}}class Lt{constructor(){this.initScene(),this.songPlaying=!1,this.currentVisualizer=null,this.visualizerType={STARS:"stars",CUBES:"cubes"},this.audioManager=new Rt}setActiveVisualizer(e){switch(this.clearScene(),this.currentVisualizer=e,this.currentVisualizer){case this.visualizerType.STARS:this.visualizer=new Ot(this.scene,2e3);break;case this.visualizerType.CUBES:this.visualizer=new Bt(this.scene);break}}animation(e){if(!this.lastTimeStamp){this.lastTimeStamp=e;return}const t=window.innerWidth,s=window.innerHeight;this.camera.aspect=t/s,this.camera.updateProjectionMatrix(),this.renderer.setSize(t,s);const l=e-this.lastTimeStamp;if(this.songPlaying&&this.visualizer!=null){let a=this.audioManager.getFrequencyData();this.visualizer.animate(l,a)}this.renderer.render(this.scene,this.camera),this.lastTimeStamp=e}initScene(){const e=window.innerWidth/window.innerHeight;this.scene=new xe,this.camera=new et(75,e,.3,100),this.scene.background=new tt(1184274),this.renderer=new st({antialias:!0}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.render(this.scene,this.camera),this.renderer.setAnimationLoop(this.animation.bind(this)),this.renderer.shadowMap.enabled=!0,document.body.appendChild(this.renderer.domElement)}clearScene(){for(;this.scene.children.length>0;)this.scene.remove(this.scene.children[0]);const e=new lt(16777215,.2);this.scene.add(e);const t=new at(16777215,1);t.position.set(0,6,10),t.castShadow=!0,this.scene.add(t)}playSound(){this.audioManager.playSound(),this.songPlaying=!0}changeSound(e){this.audioManager.changeSound(e)}muteSound(){this.audioManager.muteSound()}unmuteSound(){this.audioManager.unmuteSound()}pauseSound(){this.songPlaying=!1,this.audioManager.pauseSound()}changeVolume(e){this.audioManager.changeVolume(e)}getSongDuration(){return this.audioManager.getSongDuration()}getSongCurrentTime(){return this.audioManager.getSongCurrentTime()}addProgressEvent(e){this.audioManager.addProgressEvent(e)}addSongEndEvent(e){this.audioManager.addSongEndEvent(e)}}function Fe(i){let e,t,s,l,a,n;return e=new Mt({}),s=new At({props:{app:i[0]}}),a=new pt({props:{app:i[0]}}),{c(){le(e.$$.fragment),t=D(),le(s.$$.fragment),l=D(),le(a.$$.fragment)},l(r){ae(e.$$.fragment,r),t=T(r),ae(s.$$.fragment,r),l=T(r),ae(a.$$.fragment,r)},m(r,u){ne(e,r,u),k(r,t,u),ne(s,r,u),k(r,l,u),ne(a,r,u),n=!0},p(r,u){const o={};u&1&&(o.app=r[0]),s.$set(o);const c={};u&1&&(c.app=r[0]),a.$set(c)},i(r){n||(R(e.$$.fragment,r),R(s.$$.fragment,r),R(a.$$.fragment,r),n=!0)},o(r){H(e.$$.fragment,r),H(s.$$.fragment,r),H(a.$$.fragment,r),n=!1},d(r){ie(e,r),r&&f(t),ie(s,r),r&&f(l),ie(a,r)}}}function qt(i){let e,t,s,l=i[1].length>0&&Fe(i);return t=new kt({}),{c(){l&&l.c(),e=D(),le(t.$$.fragment)},l(a){l&&l.l(a),e=T(a),ae(t.$$.fragment,a)},m(a,n){l&&l.m(a,n),k(a,e,n),ne(t,a,n),s=!0},p(a,[n]){a[1].length>0?l?(l.p(a,n),n&2&&R(l,1)):(l=Fe(a),l.c(),R(l,1),l.m(e.parentNode,e)):l&&(ye(),H(l,1,1,()=>{l=null}),Se())},i(a){s||(R(l),R(t.$$.fragment,a),s=!0)},o(a){H(l),H(t.$$.fragment,a),s=!1},d(a){l&&l.d(a),a&&f(e),ie(t,a)}}}function Ft(i,e,t){let s;X(i,x,a=>t(1,s=a));let l;return Ve(()=>{window.focus(),t(0,l=new Lt),window.app=l}),[l,s]}class Jt extends ${constructor(e){super();Q(this,e,Ft,qt,K,{})}}export{Jt as default};
