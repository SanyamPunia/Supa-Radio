import{K as Fe,C as ie,S as Z,i as Q,s as K,e as m,t as L,c as _,a as v,g as q,d as f,b as h,f as k,I as d,h as re,J as P,k as D,n as T,L as te,M as _e,N as Ne,O as U,x as B,P as ge,Q as oe,R as X,A as Pe,T as G,U as ce,V as He,W as Je,X as ue,Y as fe,Z as be,l as $,r as we,u as H,w as ye,_ as Xe,j as se,m as le,o as ae,v as ne,$ as $e,a0 as Ve,a1 as Ge,a2 as Se,a3 as Ye,a4 as ke,a5 as We,a6 as Ze,a7 as Qe,a8 as Ke,a9 as xe,aa as et,ab as tt,ac as st,ad as lt}from"../chunks/vendor-55bebcfc.js";const J=Fe("https://dtprlndlwbwnggjkkjel.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlhdCI6MTYzMzE5OTI0OSwiZXhwIjoxOTQ4Nzc1MjQ5fQ.3j1fYOu8xDDMgZXJkM0y0VniTaXhSNrkoPziDvN-dvk"),W=ie("home"),he=ie(null),x=ie([]),de=ie(0),ee=ie(!0),at=async()=>{let i=[];const{data:e,error:t}=await J.storage.from("music-files").list();e.map(s=>{i.push({songName:s.name,url:null})}),x.set(i)};at();function De(i,e,t){const s=i.slice();return s[24]=e[t],s}function Te(i){let e,t,s=i[7][i[6]].songName.split(".")[0]+"",l;return{c(){e=m("span"),t=L("Now Playing"),l=L(s),this.h()},l(a){e=_(a,"SPAN",{class:!0});var n=v(e);t=q(n,"Now Playing"),n.forEach(f),l=q(a,s),this.h()},h(){h(e,"class","green svelte-zznv6f")},m(a,n){k(a,e,n),d(e,t),k(a,l,n)},p(a,n){n&192&&s!==(s=a[7][a[6]].songName.split(".")[0]+"")&&re(l,s)},d(a){a&&f(e),a&&f(l)}}}function nt(i){let e;return{c(){e=m("i"),this.h()},l(t){e=_(t,"I",{class:!0}),v(e).forEach(f),this.h()},h(){h(e,"class","fas fa-spinner fa-pulse svelte-zznv6f")},m(t,s){k(t,e,s)},p:P,i:P,o:P,d(t){t&&f(e)}}}function it(i){let e,t,s,l,a,n;function r(c,p){return c[1]?rt:ot}let u=r(i),o=u(i);return{c(){e=m("i"),t=D(),o.c(),s=D(),l=m("i"),this.h()},l(c){e=_(c,"I",{class:!0}),v(e).forEach(f),t=T(c),o.l(c),s=T(c),l=_(c,"I",{class:!0}),v(l).forEach(f),this.h()},h(){h(e,"class","fas fa-step-backward svelte-zznv6f"),h(l,"class","fas fa-step-forward svelte-zznv6f")},m(c,p){k(c,e,p),k(c,t,p),o.m(c,p),k(c,s,p),k(c,l,p),a||(n=[U(e,"click",i[15]),U(l,"click",i[14])],a=!0)},p(c,p){u===(u=r(c))&&o?o.p(c,p):(o.d(1),o=u(c),o&&(o.c(),B(o,1),o.m(s.parentNode,s)))},i(c){B(o)},o:P,d(c){c&&f(e),c&&f(t),o.d(c),c&&f(s),c&&f(l),a=!1,oe(n)}}}function rt(i){let e,t,s,l;return{c(){e=m("i"),this.h()},l(a){e=_(a,"I",{class:!0}),v(e).forEach(f),this.h()},h(){h(e,"class","pauseButton fas fa-pause svelte-zznv6f")},m(a,n){k(a,e,n),s||(l=U(e,"click",i[10]),s=!0)},p:P,i(a){t||te(()=>{t=ue(e,fe,{}),t.start()})},o:P,d(a){a&&f(e),s=!1,l()}}}function ot(i){let e,t,s,l;return{c(){e=m("i"),this.h()},l(a){e=_(a,"I",{class:!0}),v(e).forEach(f),this.h()},h(){h(e,"class","playButton fas fa-play svelte-zznv6f")},m(a,n){k(a,e,n),s||(l=U(e,"click",i[9]),s=!0)},p:P,i(a){t||te(()=>{t=ue(e,fe,{}),t.start()})},o:P,d(a){a&&f(e),s=!1,l()}}}function ct(i){let e,t,s;return{c(){e=m("i"),this.h()},l(l){e=_(l,"I",{id:!0,class:!0}),v(e).forEach(f),this.h()},h(){h(e,"id","muteButton"),h(e,"class","fas fa-volume-mute red svelte-zznv6f")},m(l,a){k(l,e,a),t||(s=U(e,"click",i[12]),t=!0)},p:P,d(l){l&&f(e),t=!1,s()}}}function ut(i){let e,t,s;return{c(){e=m("i"),this.h()},l(l){e=_(l,"I",{id:!0,class:!0}),v(e).forEach(f),this.h()},h(){h(e,"id","muteButton"),h(e,"class","fas fa-volume-up white svelte-zznv6f")},m(l,a){k(l,e,a),t||(s=U(e,"click",i[11]),t=!0)},p:P,d(l){l&&f(e),t=!1,s()}}}function Ce(i){let e,t=i[24]+"",s,l;return{c(){e=m("option"),s=L(t),this.h()},l(a){e=_(a,"OPTION",{class:!0});var n=v(e);s=q(n,t),n.forEach(f),this.h()},h(){e.__value=l=i[24],e.value=e.__value,h(e,"class","svelte-zznv6f")},m(a,n){k(a,e,n),d(e,s)},p:P,d(a){a&&f(e)}}}function ft(i){let e,t,s,l,a,n,r,u,o,c,p,y,b,I,E,R,N=i[7].length>0&&Te(i);function F(w,g){return w[5]?nt:it}let S=F(i),V=S(i);function A(w,g){return w[2]?ct:ut}let C=A(i),j=C(i),O=i[8],M=[];for(let w=0;w<O.length;w+=1)M[w]=Ce(De(i,O,w));return{c(){e=m("div"),t=m("div"),s=m("div"),l=D(),a=m("div"),N&&N.c(),n=D(),r=m("div"),V.c(),u=D(),o=m("div"),j.c(),c=D(),p=m("input"),y=D(),b=m("div"),I=m("select");for(let w=0;w<M.length;w+=1)M[w].c();this.h()},l(w){e=_(w,"DIV",{class:!0});var g=v(e);t=_(g,"DIV",{class:!0});var z=v(t);s=_(z,"DIV",{class:!0}),v(s).forEach(f),l=T(z),a=_(z,"DIV",{class:!0});var Y=v(a);N&&N.l(Y),Y.forEach(f),n=T(z),r=_(z,"DIV",{class:!0});var Ee=v(r);V.l(Ee),Ee.forEach(f),u=T(z),o=_(z,"DIV",{class:!0});var me=v(o);j.l(me),c=T(me),p=_(me,"INPUT",{type:!0,min:!0,max:!0,class:!0}),me.forEach(f),y=T(z),b=_(z,"DIV",{class:!0});var ze=v(b);I=_(ze,"SELECT",{class:!0});var Ie=v(I);for(let ve=0;ve<M.length;ve+=1)M[ve].l(Ie);Ie.forEach(f),ze.forEach(f),z.forEach(f),g.forEach(f),this.h()},h(){h(s,"class","progressBar svelte-zznv6f"),h(a,"class","nowPlayingContainer svelte-zznv6f"),h(r,"class","songControls svelte-zznv6f"),h(p,"type","range"),h(p,"min","0"),h(p,"max","100"),h(p,"class","slider svelte-zznv6f"),h(o,"class","volumeSlider svelte-zznv6f"),h(I,"class","svelte-zznv6f"),i[3]===void 0&&te(()=>i[21].call(I)),h(b,"class","selectVisualizer svelte-zznv6f"),h(t,"class","bottom-items svelte-zznv6f"),h(e,"class","bottom-container svelte-zznv6f")},m(w,g){k(w,e,g),d(e,t),d(t,s),i[19](s),d(t,l),d(t,a),N&&N.m(a,null),d(t,n),d(t,r),V.m(r,null),d(t,u),d(t,o),j.m(o,null),d(o,c),d(o,p),_e(p,i[0]),d(t,y),d(t,b),d(b,I);for(let z=0;z<M.length;z+=1)M[z].m(I,null);Ne(I,i[3]),E||(R=[U(window,"keydown",i[17]),U(p,"change",i[20]),U(p,"input",i[20]),U(p,"input",i[13]),U(I,"change",i[21]),U(I,"change",i[16])],E=!0)},p(w,[g]){if(w[7].length>0?N?N.p(w,g):(N=Te(w),N.c(),N.m(a,null)):N&&(N.d(1),N=null),S===(S=F(w))&&V?V.p(w,g):(V.d(1),V=S(w),V&&(V.c(),B(V,1),V.m(r,null))),C===(C=A(w))&&j?j.p(w,g):(j.d(1),j=C(w),j&&(j.c(),j.m(o,c))),g&1&&_e(p,w[0]),g&256){O=w[8];let z;for(z=0;z<O.length;z+=1){const Y=De(w,O,z);M[z]?M[z].p(Y,g):(M[z]=Ce(Y),M[z].c(),M[z].m(I,null))}for(;z<M.length;z+=1)M[z].d(1);M.length=O.length}g&264&&Ne(I,w[3])},i(w){B(V)},o:P,d(w){w&&f(e),i[19](null),N&&N.d(),V.d(),j.d(),ge(M,w),E=!1,oe(R)}}}function ht(i,e,t){let s,l,a;X(i,ee,g=>t(5,s=g)),X(i,de,g=>t(6,l=g)),X(i,x,g=>t(7,a=g));let{app:n}=e,r=20,u=r,o=!1,c=!1,p=["stars","cubes"],y=p[0],b,I={callback:()=>{V()}};Pe(async()=>{G(ee,s=!0,s);let g;if(a[l].url==null){const{data:z,error:Y}=await J.storage.from("music-files").download(a[l].songName);g=URL.createObjectURL(z),G(x,a[l].url=g,a)}n.changeSound(g),n.addProgressEvent(b),n.addSongEndEvent(I),C(),G(ee,s=!1,s)});const E=async()=>{t(1,o=!0),n.playSound()},R=()=>{t(1,o=!1),n.pauseSound()},N=()=>{t(2,c=!0),t(0,r=0),n.changeVolume(r)},F=()=>{t(2,c=!1),u==0&&(u=20),t(0,r=u),n.changeVolume(r)},S=g=>{u=r,r==0?N():(t(2,c=!1),n.changeVolume(r))},V=async()=>{R(),G(ee,s=!0,s),de.set((l+1)%a.length);let g;if(a[l].url==null){const{data:z,error:Y}=await J.storage.from("music-files").download(a[l].songName);g=URL.createObjectURL(z),G(x,a[l].url=g,a)}n.changeSound(g),G(ee,s=!1,s),E()},A=async()=>{G(ee,s=!0,s),R(),l==0?de.set(a.length-1):de.set(l-1);let g;if(a[l].url==null){const{data:z,error:Y}=await J.storage.from("music-files").download(a[l].songName);g=URL.createObjectURL(z),G(x,a[l].url=g,a)}else g=a[l].url;n.changeSound(g),G(ee,s=!1,s),E()},C=()=>{p.forEach(g=>{g==y&&n.setActiveVisualizer(y)})},j=g=>{g.keyCode==32&&(o?R():E())};function O(g){ce[g?"unshift":"push"](()=>{b=g,t(4,b)})}function M(){r=He(this.value),t(0,r)}function w(){y=Je(this),t(3,y),t(8,p)}return i.$$set=g=>{"app"in g&&t(18,n=g.app)},[r,o,c,y,b,s,l,a,p,E,R,N,F,S,V,A,C,j,n,O,M,w]}class dt extends Z{constructor(e){super();Q(this,e,ht,ft,K,{app:18})}}function pt(i){let e,t,s,l,a,n,r,u,o,c,p,y,b,I,E,R,N,F,S,V;return{c(){e=m("div"),t=m("i"),s=D(),l=m("div"),a=m("form"),n=m("input"),r=D(),u=m("input"),o=D(),c=m("button"),p=L("Sign In"),y=D(),b=m("p"),I=L("New User? "),E=m("span"),R=L("Sign Up"),N=L(" instead!"),this.h()},l(A){e=_(A,"DIV",{class:!0});var C=v(e);t=_(C,"I",{class:!0}),v(t).forEach(f),s=T(C),l=_(C,"DIV",{class:!0});var j=v(l);a=_(j,"FORM",{class:!0});var O=v(a);n=_(O,"INPUT",{name:!0,type:!0,autocomplete:!0,placeholder:!0,class:!0}),r=T(O),u=_(O,"INPUT",{name:!0,type:!0,autocomplete:!0,placeholder:!0,class:!0}),o=T(O),c=_(O,"BUTTON",{class:!0});var M=v(c);p=q(M,"Sign In"),M.forEach(f),O.forEach(f),y=T(j),b=_(j,"P",{class:!0});var w=v(b);I=q(w,"New User? "),E=_(w,"SPAN",{class:!0});var g=v(E);R=q(g,"Sign Up"),g.forEach(f),N=q(w," instead!"),w.forEach(f),j.forEach(f),C.forEach(f),this.h()},h(){h(t,"class","fas fa-arrow-left svelte-1jzb7t7"),h(n,"name","email"),h(n,"type","email"),n.required=!0,h(n,"autocomplete","off"),h(n,"placeholder","Email..."),h(n,"class","svelte-1jzb7t7"),h(u,"name","password"),h(u,"type","password"),u.required=!0,h(u,"autocomplete","off"),h(u,"placeholder","Password..."),h(u,"class","svelte-1jzb7t7"),h(c,"class","svelte-1jzb7t7"),h(a,"class","svelte-1jzb7t7"),h(E,"class","svelte-1jzb7t7"),h(b,"class","svelte-1jzb7t7"),h(l,"class","auth-form svelte-1jzb7t7"),h(e,"class","pop-up svelte-1jzb7t7")},m(A,C){k(A,e,C),d(e,t),d(e,s),d(e,l),d(l,a),d(a,n),d(a,r),d(a,u),d(a,o),d(a,c),d(c,p),d(l,y),d(l,b),d(b,I),d(b,E),d(E,R),d(b,N),S||(V=[U(t,"click",i[2]),U(a,"submit",be(i[0])),U(E,"click",i[1])],S=!0)},p:P,i(A){F||te(()=>{F=ue(e,fe,{}),F.start()})},o:P,d(A){A&&f(e),S=!1,oe(V)}}}function mt(i){async function e(l){const a=new FormData(l.target),{user:n,session:r,error:u}=await J.auth.signIn({email:a.get("email"),password:a.get("password")});if(u)alert(u.message);else{let o=n.email.split("@")[0];W.set("home"),he.set(o)}}function t(){W.set("sign-up")}return[e,t,()=>{W.set("home")}]}class _t extends Z{constructor(e){super();Q(this,e,mt,pt,K,{})}}function vt(i){let e,t,s,l,a,n,r,u,o,c,p,y,b,I,E,R,N,F,S,V;return{c(){e=m("div"),t=m("i"),s=D(),l=m("div"),a=m("form"),n=m("input"),r=D(),u=m("input"),o=D(),c=m("button"),p=L("Sign Up"),y=D(),b=m("p"),I=L("Existing User? "),E=m("span"),R=L("Sign In"),N=L(" instead!"),this.h()},l(A){e=_(A,"DIV",{class:!0});var C=v(e);t=_(C,"I",{class:!0}),v(t).forEach(f),s=T(C),l=_(C,"DIV",{class:!0});var j=v(l);a=_(j,"FORM",{class:!0});var O=v(a);n=_(O,"INPUT",{name:!0,type:!0,autocomplete:!0,placeholder:!0,class:!0}),r=T(O),u=_(O,"INPUT",{name:!0,type:!0,autocomplete:!0,placeholder:!0,class:!0}),o=T(O),c=_(O,"BUTTON",{class:!0});var M=v(c);p=q(M,"Sign Up"),M.forEach(f),O.forEach(f),y=T(j),b=_(j,"P",{class:!0});var w=v(b);I=q(w,"Existing User? "),E=_(w,"SPAN",{class:!0});var g=v(E);R=q(g,"Sign In"),g.forEach(f),N=q(w," instead!"),w.forEach(f),j.forEach(f),C.forEach(f),this.h()},h(){h(t,"class","fas fa-arrow-left svelte-1jzb7t7"),h(n,"name","email"),h(n,"type","email"),n.required=!0,h(n,"autocomplete","off"),h(n,"placeholder","Email..."),h(n,"class","svelte-1jzb7t7"),h(u,"name","password"),h(u,"type","password"),u.required=!0,h(u,"autocomplete","off"),h(u,"placeholder","Password..."),h(u,"class","svelte-1jzb7t7"),h(c,"class","svelte-1jzb7t7"),h(a,"class","svelte-1jzb7t7"),h(E,"class","svelte-1jzb7t7"),h(b,"class","svelte-1jzb7t7"),h(l,"class","auth-form svelte-1jzb7t7"),h(e,"class","pop-up svelte-1jzb7t7")},m(A,C){k(A,e,C),d(e,t),d(e,s),d(e,l),d(l,a),d(a,n),d(a,r),d(a,u),d(a,o),d(a,c),d(c,p),d(l,y),d(l,b),d(b,I),d(b,E),d(E,R),d(b,N),S||(V=[U(t,"click",i[2]),U(a,"submit",be(i[0])),U(E,"click",i[1])],S=!0)},p:P,i(A){F||te(()=>{F=ue(e,fe,{}),F.start()})},o:P,d(A){A&&f(e),S=!1,oe(V)}}}function gt(i){async function e(l){const a=new FormData(l.target),{user:n,session:r,error:u}=await J.auth.signUp({email:a.get("email"),password:a.get("password")});if(u)alert(u.message);else{W.set("home");let o=n.email.split("@")[0];he.set(o),alert("Signed In as: "+o)}}function t(){W.set("sign-in")}return[e,t,()=>{W.set("home")}]}class bt extends Z{constructor(e){super();Q(this,e,gt,vt,K,{})}}function Me(i){let e,t,s,l,a,n,r,u,o,c,p;return{c(){e=m("div"),t=m("div"),s=m("p"),l=m("span"),a=L(i[0]),n=D(),r=m("i"),u=D(),o=m("i"),this.h()},l(y){e=_(y,"DIV",{class:!0});var b=v(e);t=_(b,"DIV",{class:!0});var I=v(t);s=_(I,"P",{class:!0});var E=v(s);l=_(E,"SPAN",{class:!0});var R=v(l);a=q(R,i[0]),R.forEach(f),n=T(E),r=_(E,"I",{class:!0}),v(r).forEach(f),u=T(E),o=_(E,"I",{class:!0}),v(o).forEach(f),E.forEach(f),I.forEach(f),b.forEach(f),this.h()},h(){h(l,"class","svelte-1okxqai"),h(r,"class","fas fa-user"),h(o,"class","fas fa-sign-out-alt svelte-1okxqai"),h(s,"class","svelte-1okxqai"),h(t,"class","profile"),h(e,"class","profile-container svelte-1okxqai")},m(y,b){k(y,e,b),d(e,t),d(t,s),d(s,l),d(l,a),d(s,n),d(s,r),d(s,u),d(s,o),c||(p=U(o,"click",i[1]),c=!0)},p(y,b){b&1&&re(a,y[0])},d(y){y&&f(e),c=!1,p()}}}function wt(i){let e,t=i[0]!=null&&Me(i);return{c(){t&&t.c(),e=$()},l(s){t&&t.l(s),e=$()},m(s,l){t&&t.m(s,l),k(s,e,l)},p(s,[l]){s[0]!=null?t?t.p(s,l):(t=Me(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:P,o:P,d(s){t&&t.d(s),s&&f(e)}}}function yt(i,e,t){let s;X(i,he,a=>t(0,s=a));async function l(){const{error:a}=await J.auth.signOut();console.log(a),he.set(null)}return[s,l]}class St extends Z{constructor(e){super();Q(this,e,yt,wt,K,{})}}function Ue(i,e,t){const s=i.slice();return s[16]=e[t].name,s[17]=e[t].user,s}function je(i){let e,t,s,l;const a=[zt,Et,kt],n=[];function r(u,o){return u[6]=="home"?0:u[6]=="sign-in"?1:u[6]=="sign-up"?2:-1}return~(e=r(i))&&(t=n[e]=a[e](i)),{c(){t&&t.c(),s=$()},l(u){t&&t.l(u),s=$()},m(u,o){~e&&n[e].m(u,o),k(u,s,o),l=!0},p(u,o){let c=e;e=r(u),e===c?~e&&n[e].p(u,o):(t&&(we(),H(n[c],1,1,()=>{n[c]=null}),ye()),~e?(t=n[e],t?t.p(u,o):(t=n[e]=a[e](u),t.c()),B(t,1),t.m(s.parentNode,s)):t=null)},i(u){l||(B(t),l=!0)},o(u){H(t),l=!1},d(u){~e&&n[e].d(u),u&&f(s)}}}function kt(i){let e,t;return e=new bt({}),{c(){se(e.$$.fragment)},l(s){le(e.$$.fragment,s)},m(s,l){ae(e,s,l),t=!0},p:P,i(s){t||(B(e.$$.fragment,s),t=!0)},o(s){H(e.$$.fragment,s),t=!1},d(s){ne(e,s)}}}function Et(i){let e,t;return e=new _t({}),{c(){se(e.$$.fragment)},l(s){le(e.$$.fragment,s)},m(s,l){ae(e,s,l),t=!0},p:P,i(s){t||(B(e.$$.fragment,s),t=!0)},o(s){H(e.$$.fragment,s),t=!1},d(s){ne(e,s)}}}function zt(i){let e,t,s;function l(c,p){return c[7]?Nt:It}let a=l(i),n=a(i);function r(c,p){return c[5]==null?Vt:Pt}let u=r(i),o=u(i);return{c(){e=m("div"),n.c(),t=D(),o.c(),s=$(),this.h()},l(c){e=_(c,"DIV",{class:!0});var p=v(e);n.l(p),p.forEach(f),t=T(c),o.l(c),s=$(),this.h()},h(){h(e,"class","chat-display svelte-1wcw8na")},m(c,p){k(c,e,p),n.m(e,null),i[12](e),k(c,t,p),o.m(c,p),k(c,s,p)},p(c,p){a===(a=l(c))&&n?n.p(c,p):(n.d(1),n=a(c),n&&(n.c(),n.m(e,null))),u===(u=r(c))&&o?o.p(c,p):(o.d(1),o=u(c),o&&(o.c(),B(o,1),o.m(s.parentNode,s)))},i(c){B(o)},o:P,d(c){c&&f(e),n.d(),i[12](null),c&&f(t),o.d(c),c&&f(s)}}}function It(i){let e;return{c(){e=m("i"),this.h()},l(t){e=_(t,"I",{class:!0}),v(e).forEach(f),this.h()},h(){h(e,"class","fas fa-spinner fa-pulse svelte-1wcw8na")},m(t,s){k(t,e,s)},p:P,d(t){t&&f(e)}}}function Nt(i){let e,t=i[7],s=[];for(let l=0;l<t.length;l+=1)s[l]=Ae(Ue(i,t,l));return{c(){for(let l=0;l<s.length;l+=1)s[l].c();e=$()},l(l){for(let a=0;a<s.length;a+=1)s[a].l(l);e=$()},m(l,a){for(let n=0;n<s.length;n+=1)s[n].m(l,a);k(l,e,a)},p(l,a){if(a&128){t=l[7];let n;for(n=0;n<t.length;n+=1){const r=Ue(l,t,n);s[n]?s[n].p(r,a):(s[n]=Ae(r),s[n].c(),s[n].m(e.parentNode,e))}for(;n<s.length;n+=1)s[n].d(1);s.length=t.length}},d(l){ge(s,l),l&&f(e)}}}function Ae(i){let e,t,s,l=i[17]+"",a,n,r=i[16]+"",u,o;return{c(){e=m("div"),t=m("p"),s=m("span"),a=L(l),n=L(": "),u=L(r),o=D(),this.h()},l(c){e=_(c,"DIV",{class:!0});var p=v(e);t=_(p,"P",{class:!0});var y=v(t);s=_(y,"SPAN",{class:!0});var b=v(s);a=q(b,l),b.forEach(f),n=q(y,": "),u=q(y,r),y.forEach(f),o=T(p),p.forEach(f),this.h()},h(){h(s,"class","svelte-1wcw8na"),h(t,"class","svelte-1wcw8na"),h(e,"class","chat-content svelte-1wcw8na")},m(c,p){k(c,e,p),d(e,t),d(t,s),d(s,a),d(t,n),d(t,u),d(e,o)},p(c,p){p&128&&l!==(l=c[17]+"")&&re(a,l),p&128&&r!==(r=c[16]+"")&&re(u,r)},d(c){c&&f(e)}}}function Pt(i){let e,t,s,l,a,n,r,u,o;return{c(){e=m("form"),t=m("div"),s=m("input"),l=D(),a=m("div"),n=m("button"),r=m("i"),this.h()},l(c){e=_(c,"FORM",{});var p=v(e);t=_(p,"DIV",{class:!0});var y=v(t);s=_(y,"INPUT",{placeholder:!0,class:!0,name:!0,type:!0,autocomplete:!0}),l=T(y),a=_(y,"DIV",{class:!0});var b=v(a);n=_(b,"BUTTON",{class:!0});var I=v(n);r=_(I,"I",{class:!0}),v(r).forEach(f),I.forEach(f),b.forEach(f),y.forEach(f),p.forEach(f),this.h()},h(){s.required=!0,h(s,"placeholder","Enter Message..."),h(s,"class","form-input svelte-1wcw8na"),h(s,"name","name"),h(s,"type","text"),h(s,"autocomplete","off"),h(r,"class","fas fa-arrow-right svelte-1wcw8na"),h(n,"class","form-btn svelte-1wcw8na"),h(a,"class","btn svelte-1wcw8na"),h(t,"class","form-elements svelte-1wcw8na")},m(c,p){k(c,e,p),d(e,t),d(t,s),i[14](s),_e(s,i[1]),d(t,l),d(t,a),d(a,n),d(n,r),u||(o=[U(s,"input",i[15]),U(e,"submit",be(i[8]))],u=!0)},p(c,p){p&2&&s.value!==c[1]&&_e(s,c[1])},i:P,o:P,d(c){c&&f(e),i[14](null),u=!1,oe(o)}}}function Vt(i){let e,t,s,l,a,n;return{c(){e=m("div"),t=m("button"),s=L("Join Chat"),this.h()},l(r){e=_(r,"DIV",{class:!0});var u=v(e);t=_(u,"BUTTON",{class:!0});var o=v(t);s=q(o,"Join Chat"),o.forEach(f),u.forEach(f),this.h()},h(){h(t,"class","svelte-1wcw8na"),h(e,"class","auth-btn svelte-1wcw8na")},m(r,u){k(r,e,u),d(e,t),d(t,s),a||(n=U(t,"click",i[13]),a=!0)},p:P,i(r){l||te(()=>{l=ue(t,fe,{}),l.start()})},o:P,d(r){r&&f(e),a=!1,n()}}}function Dt(i){let e,t,s,l,a,n,r,u,o=i[3]==!1&&je(i);return{c(){e=m("div"),t=m("div"),s=m("div"),l=m("i"),a=D(),o&&o.c(),this.h()},l(c){e=_(c,"DIV",{class:!0});var p=v(e);t=_(p,"DIV",{class:!0});var y=v(t);s=_(y,"DIV",{class:!0});var b=v(s);l=_(b,"I",{class:!0}),v(l).forEach(f),b.forEach(f),a=T(y),o&&o.l(y),y.forEach(f),p.forEach(f),this.h()},h(){h(l,"class","fas fa-dot-circle svelte-1wcw8na"),h(s,"class","toggle-container svelte-1wcw8na"),h(t,"class","chatForm svelte-1wcw8na"),h(e,"class","container svelte-1wcw8na")},m(c,p){k(c,e,p),d(e,t),d(t,s),d(s,l),i[11](l),d(t,a),o&&o.m(t,null),n=!0,r||(u=U(s,"click",i[10]),r=!0)},p(c,[p]){c[3]==!1?o?(o.p(c,p),p&8&&B(o,1)):(o=je(c),o.c(),B(o,1),o.m(t,null)):o&&(we(),H(o,1,1,()=>{o=null}),ye())},i(c){n||(B(o),n=!0)},o(c){H(o),n=!1},d(c){c&&f(e),i[11](null),o&&o.d(),r=!1,u()}}}function Tt(i,e,t){let s,l,a;X(i,he,S=>t(5,s=S)),X(i,W,S=>t(6,l=S));let n,r="",u,o=!1,c;async function p(S){const V=new FormData(S.target),{data:A,error:C}=await J.from("chat").insert({name:V.get("name"),user:s});console.log(C),t(0,n.value="",n),t(2,u.scrollTop=u.scrollHeight,u)}const y=Xe(null,S=>{J.from("chat").select("*").then(({error:A,data:C})=>S(C));const V=J.from("chat").on("INSERT",A=>{S([...$e(y),A.new])}).subscribe();return()=>J.removeSubscription(V)});X(i,y,S=>t(7,a=S));function b(S){t(3,o=!o),o?t(4,c.className="far fa-comment-dots",c):t(4,c.className="fas fa-dot-circle",c)}function I(S){ce[S?"unshift":"push"](()=>{c=S,t(4,c)})}function E(S){ce[S?"unshift":"push"](()=>{u=S,t(2,u)})}const R=()=>{W.set("sign-in")};function N(S){ce[S?"unshift":"push"](()=>{n=S,t(0,n)})}function F(){r=this.value,t(1,r)}return[n,r,u,o,c,s,l,a,p,y,b,I,E,R,N,F]}class Ct extends Z{constructor(e){super();Q(this,e,Tt,Dt,K,{})}}function Oe(i,e,t){const s=i.slice();return s[7]=e[t],s[9]=t,s}function Re(i){let e,t,s,l,a=i[2],n=[];for(let r=0;r<a.length;r+=1)n[r]=Be(Oe(i,a,r));return{c(){e=m("h1"),t=L("Playlist"),s=D();for(let r=0;r<n.length;r+=1)n[r].c();l=$(),this.h()},l(r){e=_(r,"H1",{class:!0});var u=v(e);t=q(u,"Playlist"),u.forEach(f),s=T(r);for(let o=0;o<n.length;o+=1)n[o].l(r);l=$(),this.h()},h(){h(e,"class","svelte-1th2x6n")},m(r,u){k(r,e,u),d(e,t),k(r,s,u);for(let o=0;o<n.length;o+=1)n[o].m(r,u);k(r,l,u)},p(r,u){if(u&12){a=r[2];let o;for(o=0;o<a.length;o+=1){const c=Oe(r,a,o);n[o]?n[o].p(c,u):(n[o]=Be(c),n[o].c(),n[o].m(l.parentNode,l))}for(;o<n.length;o+=1)n[o].d(1);n.length=a.length}},d(r){r&&f(e),r&&f(s),ge(n,r),r&&f(l)}}}function Be(i){let e,t=i[7].songName.split(".")[0]+"",s,l;return{c(){e=m("p"),s=L(t),this.h()},l(a){e=_(a,"P",{class:!0});var n=v(e);s=q(n,t),n.forEach(f),this.h()},h(){h(e,"class",l=""+(Ve(i[3]==i[9]?"currentSong":"")+" svelte-1th2x6n"))},m(a,n){k(a,e,n),d(e,s)},p(a,n){n&4&&t!==(t=a[7].songName.split(".")[0]+"")&&re(s,t),n&8&&l!==(l=""+(Ve(a[3]==a[9]?"currentSong":"")+" svelte-1th2x6n"))&&h(e,"class",l)},d(a){a&&f(e)}}}function Mt(i){let e,t,s,l,a,n,r=i[0]==!1&&Re(i);return{c(){e=m("div"),t=m("div"),s=m("i"),l=D(),r&&r.c(),this.h()},l(u){e=_(u,"DIV",{class:!0});var o=v(e);t=_(o,"DIV",{class:!0});var c=v(t);s=_(c,"I",{class:!0}),v(s).forEach(f),c.forEach(f),l=T(o),r&&r.l(o),o.forEach(f),this.h()},h(){h(s,"class","fas fa-dot-circle"),h(t,"class","toggle-container svelte-1th2x6n"),h(e,"class","playlist-container svelte-1th2x6n")},m(u,o){k(u,e,o),d(e,t),d(t,s),i[6](s),d(e,l),r&&r.m(e,null),a||(n=U(t,"click",i[4]),a=!0)},p(u,[o]){u[0]==!1?r?r.p(u,o):(r=Re(u),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},i:P,o:P,d(u){u&&f(e),i[6](null),r&&r.d(),a=!1,n()}}}function Ut(i,e,t){let s,l;X(i,x,c=>t(2,s=c)),X(i,de,c=>t(3,l=c));let a=!1,n,{app:r}=e;function u(c){t(0,a=!a),a?t(1,n.className="fas fa-music",n):t(1,n.className="fas fa-dot-circle",n)}function o(c){ce[c?"unshift":"push"](()=>{n=c,t(1,n)})}return i.$$set=c=>{"app"in c&&t(5,r=c.app)},[a,n,s,l,u,r,o]}class jt extends Z{constructor(e){super();Q(this,e,Ut,Mt,K,{app:5})}}const Le=(i,e)=>i[Math.floor(Math.random()*e)],pe=(i,e)=>Math.random()*(e-i)+i;class At{constructor(e,t){this.maximumStars=t,this.stars=[],this.scene=e,this.starHolder=new Ge,this.starHolder.position.setY(25),this.colors=[16711765,16711680,16711714,43775,16777215],this.addStars()}addStars(){for(let e=0;e<this.maximumStars;e++){const t=pe(.01,.25),s=new Se(new Ye(t,24,24),new ke({color:Le(this.colors,this.colors.length)}));this.spawnStar(s),this.stars.push(s),this.starHolder.add(s)}this.scene.add(this.starHolder)}animate(e,t){let s=1e-6,l=t[20]*s,a=s+(s*t[7]+l);this.starHolder.rotateX(-a*e)}spawnStar(e){let t=pe(-50,50),s=pe(-50,50),l=pe(-50,50);e.position.set(t,s,l)}}class Ot{constructor(){this.audio=new Audio,this.audio.crossOrigin="anonymous",this.initialized=!1,this.audioGain=!0}changeSound(e){this.audio.src=e}playSound(){this.initialized||(this.audioCtx=new AudioContext,this.gainNode=this.audioCtx.createGain(),this.audioSource=this.audioCtx.createMediaElementSource(this.audio),this.analyser=this.audioCtx.createAnalyser(),this.audioSource.connect(this.analyser),this.analyser.connect(this.gainNode),this.gainNode.connect(this.audioCtx.destination),this.analyser.fftSize=64,this.bufferLength=this.analyser.frequencyBinCount,this.dataArray=new Uint8Array(this.bufferLength),this.gainNode.gain.value=.2,this.initialized=!0),this.audio.play()}muteSound(){this.gainNode.gain.value=0}unmuteSound(){this.gainNode.gain.value=1}pauseSound(){this.audio.pause()}changeVolume(e){this.gainNode.gain.value=e/100}getFrequencyData(){return this.analyser.getByteFrequencyData(this.dataArray),this.dataArray}addProgressEvent(e){this.audio.addEventListener("timeupdate",()=>{let t=this.audio.currentTime/this.audio.duration*100;e.style.width=t+"%"})}addSongEndEvent(e){this.audio.addEventListener("ended",()=>{e.callback()})}}class Rt{constructor(e){this.scene=e,this.colors=[16711782,13893717,11141188,5570594,8388659],this.initScene()}animate(e,t){let s=.01;for(let l=0;l<32;l++){let a=Math.min(s+s*t[l],2.56);this.cubes[l].scale.setZ(a*e)}}initScene(){this.cubes=[];let e=.7;for(let s=0;s<32;s++){let l=new Se(new We(1,1,1,24,24,24),new ke({color:Le(this.colors,this.colors.length)})),a=(s-16)/e,n=-pe(15,25);l.position.setX(a),l.position.setY(n),l.receiveShadow=!0,l.castShadow=!0,this.cubes.push(l)}const t=new Se(new Ze(50,50),new ke({color:6060778,side:Qe}));t.rotateX(-80),t.position.setZ(-10),t.position.setY(-5),t.receiveShadow=!0;for(let s=0;s<32;s++)t.add(this.cubes[s]);this.scene.add(t)}}class Bt{constructor(){this.initScene(),this.songPlaying=!1,this.currentVisualizer=null,this.visualizerType={STARS:"stars",CUBES:"cubes"},this.audioManager=new Ot}setActiveVisualizer(e){switch(this.clearScene(),this.currentVisualizer=e,this.currentVisualizer){case this.visualizerType.STARS:this.visualizer=new At(this.scene,2e3);break;case this.visualizerType.CUBES:this.visualizer=new Rt(this.scene);break}}animation(e){if(!this.lastTimeStamp){this.lastTimeStamp=e;return}const t=window.innerWidth,s=window.innerHeight;this.camera.aspect=t/s,this.camera.updateProjectionMatrix(),this.renderer.setSize(t,s);const l=e-this.lastTimeStamp;if(this.songPlaying&&this.visualizer!=null){let a=this.audioManager.getFrequencyData();this.visualizer.animate(l,a)}this.renderer.render(this.scene,this.camera),this.lastTimeStamp=e}initScene(){const e=window.innerWidth/window.innerHeight;this.scene=new Ke,this.camera=new xe(75,e,.3,100),this.scene.background=new et(1184274),this.renderer=new tt({antialias:!0}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.render(this.scene,this.camera),this.renderer.setAnimationLoop(this.animation.bind(this)),this.renderer.shadowMap.enabled=!0,document.body.appendChild(this.renderer.domElement)}clearScene(){for(;this.scene.children.length>0;)this.scene.remove(this.scene.children[0]);const e=new st(16777215,.2);this.scene.add(e);const t=new lt(16777215,1);t.position.set(0,6,10),t.castShadow=!0,this.scene.add(t)}playSound(){this.audioManager.playSound(),this.songPlaying=!0}changeSound(e){this.audioManager.changeSound(e)}muteSound(){this.audioManager.muteSound()}unmuteSound(){this.audioManager.unmuteSound()}pauseSound(){this.songPlaying=!1,this.audioManager.pauseSound()}changeVolume(e){this.audioManager.changeVolume(e)}getSongDuration(){return this.audioManager.getSongDuration()}getSongCurrentTime(){return this.audioManager.getSongCurrentTime()}addProgressEvent(e){this.audioManager.addProgressEvent(e)}addSongEndEvent(e){this.audioManager.addSongEndEvent(e)}}function qe(i){let e,t,s,l,a,n;return e=new Ct({}),s=new jt({props:{app:i[0]}}),a=new dt({props:{app:i[0]}}),{c(){se(e.$$.fragment),t=D(),se(s.$$.fragment),l=D(),se(a.$$.fragment)},l(r){le(e.$$.fragment,r),t=T(r),le(s.$$.fragment,r),l=T(r),le(a.$$.fragment,r)},m(r,u){ae(e,r,u),k(r,t,u),ae(s,r,u),k(r,l,u),ae(a,r,u),n=!0},p(r,u){const o={};u&1&&(o.app=r[0]),s.$set(o);const c={};u&1&&(c.app=r[0]),a.$set(c)},i(r){n||(B(e.$$.fragment,r),B(s.$$.fragment,r),B(a.$$.fragment,r),n=!0)},o(r){H(e.$$.fragment,r),H(s.$$.fragment,r),H(a.$$.fragment,r),n=!1},d(r){ne(e,r),r&&f(t),ne(s,r),r&&f(l),ne(a,r)}}}function Lt(i){let e,t,s,l=i[1].length>0&&qe(i);return t=new St({}),{c(){l&&l.c(),e=D(),se(t.$$.fragment)},l(a){l&&l.l(a),e=T(a),le(t.$$.fragment,a)},m(a,n){l&&l.m(a,n),k(a,e,n),ae(t,a,n),s=!0},p(a,[n]){a[1].length>0?l?(l.p(a,n),n&2&&B(l,1)):(l=qe(a),l.c(),B(l,1),l.m(e.parentNode,e)):l&&(we(),H(l,1,1,()=>{l=null}),ye())},i(a){s||(B(l),B(t.$$.fragment,a),s=!0)},o(a){H(l),H(t.$$.fragment,a),s=!1},d(a){l&&l.d(a),a&&f(e),ne(t,a)}}}function qt(i,e,t){let s;X(i,x,a=>t(1,s=a));let l;return Pe(()=>{window.focus(),t(0,l=new Bt),window.app=l}),[l,s]}class Ht extends Z{constructor(e){super();Q(this,e,qt,Lt,K,{})}}export{Ht as default};
